/* ForensicInvestigator - Anomalies Detection Styles */

/* Detection Summary Modal Enhanced */
.detection-summary-enhanced {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.detection-summary-enhanced .summary-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border);
}

.detection-summary-enhanced .summary-icon {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.detection-summary-enhanced .summary-icon.critical {
    background: linear-gradient(135deg, #dc2626, #b91c1c);
    animation: pulse-critical 2s infinite;
}

.detection-summary-enhanced .summary-icon.warning {
    background: linear-gradient(135deg, #f97316, #ea580c);
}

.detection-summary-enhanced .summary-icon.success {
    background: linear-gradient(135deg, #22c55e, #16a34a);
}

.detection-summary-enhanced .summary-icon .material-icons {
    color: white;
    font-size: 28px;
}

@keyframes pulse-critical {
    0%, 100% { box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.4); }
    50% { box-shadow: 0 0 0 10px rgba(220, 38, 38, 0); }
}

.detection-summary-enhanced .summary-title h3 {
    margin: 0;
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--text);
}

.detection-summary-enhanced .summary-title p {
    margin: 0.25rem 0 0;
    font-size: 0.875rem;
    color: var(--text-muted);
}

/* Severity Breakdown Bar */
.severity-breakdown {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.severity-bar {
    display: flex;
    height: 8px;
    border-radius: 4px;
    overflow: hidden;
    background: var(--bg-secondary);
}

.severity-segment {
    transition: flex 0.3s ease;
}

.severity-segment.critical {
    background: linear-gradient(90deg, #dc2626, #ef4444);
}

.severity-segment.high {
    background: linear-gradient(90deg, #f97316, #fb923c);
}

.severity-segment.other {
    background: linear-gradient(90deg, #6b7280, #9ca3af);
}

.severity-legend {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    font-size: 0.75rem;
}

.severity-legend .legend-item {
    display: flex;
    align-items: center;
    gap: 0.375rem;
    color: var(--text-muted);
}

.severity-legend .legend-item .dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
}

.severity-legend .legend-item.critical .dot {
    background: #dc2626;
}

.severity-legend .legend-item.high .dot {
    background: #f97316;
}

.severity-legend .legend-item.other .dot {
    background: #6b7280;
}

/* Detection Types */
.detection-types {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.detection-types h4 {
    margin: 0;
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.detection-type-group {
    background: var(--bg-secondary);
    border-radius: 8px;
    padding: 0.75rem;
}

.detection-type-group .type-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
}

.detection-type-group .type-header .material-icons {
    font-size: 18px;
    color: var(--primary);
}

.detection-type-group .type-name {
    font-weight: 500;
    flex: 1;
}

.detection-type-group .type-count {
    background: var(--primary);
    color: white;
    font-size: 0.75rem;
    font-weight: 600;
    padding: 0.125rem 0.5rem;
    border-radius: 10px;
}

.detection-type-group .type-items {
    display: flex;
    flex-direction: column;
    gap: 0.375rem;
    padding-left: 1.75rem;
}

.detection-type-group .type-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.8125rem;
    color: var(--text-secondary);
}

.detection-type-group .type-item .severity-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    flex-shrink: 0;
}

.detection-type-group .type-item.severity-critical .severity-dot {
    background: #dc2626;
}

.detection-type-group .type-item.severity-high .severity-dot {
    background: #f97316;
}

.detection-type-group .type-item.severity-medium .severity-dot {
    background: #eab308;
}

.detection-type-group .type-item.severity-low .severity-dot {
    background: #6b7280;
}

.detection-type-group .type-item.more {
    color: var(--text-muted);
    font-style: italic;
    font-size: 0.75rem;
}

/* Detection Alert */
.detection-alert {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    background: linear-gradient(135deg, #fef3c7, #fde68a);
    border: 1px solid #f59e0b;
    border-radius: 8px;
    padding: 0.875rem;
}

.detection-alert .material-icons {
    color: #d97706;
    font-size: 20px;
    flex-shrink: 0;
}

.detection-alert p {
    margin: 0;
    font-size: 0.8125rem;
    color: #92400e;
    line-height: 1.4;
}

/* Anomaly Alert Banner */
.anomaly-alerts-banner {
    background: linear-gradient(135deg, #fef2f2, #fee2e2);
    border: 1px solid #fca5a5;
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 1rem;
}

.alert-icon {
    width: 40px;
    height: 40px;
    background: #dc2626;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: pulse-alert 2s infinite;
}

.alert-icon .material-icons {
    color: white;
    font-size: 22px;
}

@keyframes pulse-alert {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

.alert-content {
    flex: 1;
}

.alert-title {
    font-weight: 600;
    color: #991b1b;
    margin-bottom: 0.25rem;
}

.alert-message {
    font-size: 0.85rem;
    color: #b91c1c;
}

.alert-actions {
    display: flex;
    gap: 0.5rem;
}

/* Empty States - Legacy class names */
.scenarios-empty-state,
.anomalies-empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 3rem;
    text-align: center;
    color: var(--text-muted);
}

.scenarios-empty-state .material-icons,
.anomalies-empty-state .material-icons {
    font-size: 64px;
    color: #cbd5e1;
    margin-bottom: 1rem;
}

.scenarios-empty-state h4,
.anomalies-empty-state h4 {
    margin: 0 0 0.5rem;
    color: var(--text-dark);
}

.scenarios-empty-state p,
.anomalies-empty-state p {
    margin: 0;
    font-size: 0.9rem;
}

/* Empty States - For anomalies panels */
#anomalies-list .empty-state,
#anomaly-detail .empty-state,
#anomaly-stats .empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 3rem 1rem;
    text-align: center;
}

#anomalies-list .empty-state-icon,
#anomaly-detail .empty-state-icon,
#anomaly-stats .empty-state-icon {
    font-size: 3rem;
    color: var(--text-muted);
    opacity: 0.4;
    margin-bottom: 1rem;
}

#anomalies-list .empty-state-title,
#anomaly-detail .empty-state-title,
#anomaly-stats .empty-state-title {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-dark);
    margin: 0 0 0.5rem;
}

#anomalies-list .empty-state-description,
#anomaly-detail .empty-state-description,
#anomaly-stats .empty-state-description {
    font-size: 0.875rem;
    color: var(--text-muted);
    margin: 0;
}

/* Responsive */
@media (max-width: 1200px) {
    .scenarios-content {
        grid-template-columns: 300px 1fr;
    }

    #scenario-detail-panel {
        display: none;
    }

    .anomalies-content {
        grid-template-columns: 1fr;
    }

    #anomaly-detail-panel {
        display: none;
    }
}

@media (max-width: 768px) {
    .scenarios-content {
        grid-template-columns: 1fr;
    }

    #scenario-graph-container {
        display: none;
    }

    .anomaly-stats-bar {
        flex-wrap: wrap;
    }

    .anomaly-stat-item {
        min-width: calc(50% - 0.5rem);
    }
}

/* ============================================
   SCENARIOS TWO-COLUMN LAYOUT
   ============================================ */

/* View container for scenarios - override default grid */
#view-scenarios:not(.hidden) {
    display: block;
    height: calc(100vh - 180px);
    overflow: hidden;
    padding-bottom: 1rem;
}

.scenarios-two-columns {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
    height: 100%;
    min-height: 0;
}

.scenarios-left-column {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    min-height: 0;
    overflow: hidden;
}

.scenarios-left-column .panel:first-child {
    flex-shrink: 0;
    max-height: 50%;
}

.scenarios-left-column .panel:first-child .panel-content {
    overflow-y: auto;
    max-height: 300px;
}

.scenarios-left-column .panel:last-child {
    flex: 1;
    min-height: 0;
    display: flex;
    flex-direction: column;
}

.scenarios-left-column .panel:last-child .panel-content {
    flex: 1;
    overflow-y: auto;
}

.scenarios-right-column {
    display: flex;
    flex-direction: column;
    min-height: 0;
}

.scenarios-right-column .panel {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 0;
}

.scenarios-right-column .panel-content {
    flex: 1;
    min-height: 400px;
}

.scenario-graph-panel {
    flex: 1;
    display: flex;
    flex-direction: column;
}

.scenario-graph-panel #scenario-graph-container {
    flex: 1;
    min-height: 400px;
}

/* Responsive: scenarios single column on small screens */
@media (max-width: 1200px) {
    .scenarios-two-columns {
        grid-template-columns: 1fr;
        overflow-y: auto;
    }

    .scenarios-left-column,
    .scenarios-right-column {
        overflow: visible;
    }

    .scenarios-left-column .panel:first-child {
        max-height: none;
    }

    .scenarios-left-column .panel:first-child .panel-content {
        max-height: 350px;
    }

    .scenarios-right-column .panel-content {
        min-height: 350px;
    }
}

/* ============================================
   ANOMALIES TWO-COLUMN LAYOUT
   ============================================ */

.anomalies-two-columns {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
    height: 100%;
    min-height: 0;
}

.anomalies-left-column {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    min-height: 0;
    overflow: hidden;
}

.anomalies-left-column .panel:first-child {
    flex-shrink: 0;
}

.anomalies-left-column .panel:last-child {
    flex: 1;
    min-height: 0;
    display: flex;
    flex-direction: column;
}

.anomalies-left-column .panel:last-child .panel-content {
    flex: 1;
    overflow-y: auto;
}

.anomalies-right-column {
    display: flex;
    flex-direction: column;
    min-height: 0;
    overflow: hidden;
}

.panel-full-height {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 0;
}

.panel-content-scroll {
    flex: 1;
    overflow-y: auto;
    max-height: none !important;
}

/* View container for anomalies - override default grid */
#view-anomalies:not(.hidden) {
    display: block;
    height: calc(100vh - 180px);
    overflow: hidden;
}

#view-anomalies .panel {
    background: white;
    border-radius: 12px;
    box-shadow: var(--shadow-sm);
}

#view-anomalies .panel-header {
    padding: 1rem 1.25rem;
    border-bottom: 1px solid var(--border);
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-shrink: 0;
}

#view-anomalies .panel-content {
    padding: 1rem 1.25rem;
}

#view-anomalies .panel-description {
    padding: 0.75rem 1.25rem;
    background: #f8fafc;
    border-bottom: 1px solid var(--border);
    font-size: 0.85rem;
    color: var(--text-muted);
    display: flex;
    align-items: flex-start;
    gap: 0.5rem;
}

#view-anomalies .panel-description .material-icons {
    font-size: 18px;
    flex-shrink: 0;
    margin-top: 2px;
    color: var(--primary);
}

#view-anomalies .panel-description .description-text {
    flex: 1;
    line-height: 1.5;
}

#view-anomalies .panel-description .description-text strong {
    color: var(--text-dark);
}

/* ============================================
   ANOMALY CARDS
   ============================================ */

/* Anomalies filters */
.anomalies-filters {
    display: flex;
    gap: 0.75rem;
    padding: 1rem;
    border-bottom: 1px solid var(--border);
    flex-wrap: wrap;
}

.anomalies-filters select {
    padding: 0.5rem 0.75rem;
    border: 1px solid var(--border);
    border-radius: 6px;
    font-size: 0.85rem;
    background: white;
}

#anomalies-list {
    flex: 1;
    overflow-y: auto;
    padding: 1rem;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.anomaly-card {
    background: #f8fafc;
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 1rem;
    cursor: pointer;
    transition: all 0.2s;
}

.anomaly-card:hover {
    border-color: var(--primary);
    box-shadow: 0 2px 8px rgba(30, 58, 95, 0.1);
}

.anomaly-card.selected {
    border-color: var(--primary);
    background: #eff6ff;
}

.anomaly-card.acknowledged {
    opacity: 0.7;
}

.anomaly-card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 0.5rem;
}

.anomaly-card-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 600;
    color: var(--text-dark);
    font-size: 0.95rem;
}

.anomaly-card-title .material-icons {
    font-size: 18px;
}

/* Severity badges */
.severity-badge {
    font-size: 0.7rem;
    padding: 0.2rem 0.5rem;
    border-radius: 4px;
    font-weight: 600;
    text-transform: uppercase;
}

.severity-badge.critical {
    background: #fef2f2;
    color: #dc2626;
}

.severity-badge.high {
    background: #fff7ed;
    color: #ea580c;
}

.severity-badge.medium {
    background: #fefce8;
    color: #ca8a04;
}

.severity-badge.low {
    background: #f0fdf4;
    color: #16a34a;
}

/* Anomaly type badge */
.anomaly-type-badge {
    font-size: 0.7rem;
    padding: 0.15rem 0.5rem;
    border-radius: 4px;
    background: #e2e8f0;
    color: var(--text-muted);
}

.anomaly-card-description {
    font-size: 0.85rem;
    color: var(--text-muted);
    margin-bottom: 0.75rem;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.anomaly-card-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.75rem;
    color: var(--text-muted);
}

.anomaly-confidence {
    display: flex;
    align-items: center;
    gap: 0.25rem;
}

.anomaly-entities {
    display: flex;
    gap: 0.25rem;
}

/* Anomaly Card Actions - 3 colonnes */
#anomalies-list .anomaly-card .anomaly-actions {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
    margin-top: 0.75rem;
    padding-top: 0.75rem;
    border-top: 1px solid var(--border);
}

#anomalies-list .anomaly-card .anomaly-actions .btn {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.5rem;
    border-radius: 6px;
    background: #f1f5f9;
    border: 1px solid #e2e8f0;
    transition: all 0.2s;
}

#anomalies-list .anomaly-card .anomaly-actions .btn:hover {
    background: #e2e8f0;
    border-color: #cbd5e1;
}

#anomalies-list .anomaly-card .anomaly-actions .btn .material-icons {
    font-size: 18px;
    color: #64748b;
}

#anomalies-list .anomaly-card .anomaly-actions .btn:hover .material-icons {
    color: var(--primary);
}

/* Responsive pour 2 colonnes anomalies */
@media (max-width: 1024px) {
    .anomalies-two-columns {
        grid-template-columns: 1fr;
        overflow-y: auto;
    }

    .anomalies-left-column,
    .anomalies-right-column {
        overflow: visible;
    }

    .panel-content-scroll {
        max-height: 400px !important;
    }
}

/* ============================================
   ANOMALY STATS DASHBOARD - NEW DESIGN
   ============================================ */

.anomaly-stats-dashboard {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

/* Main stats row - 3 boxes */
.stats-main-row {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
}

.stat-box {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem;
    border-radius: 10px;
    background: #f8fafc;
    border: 1px solid #e2e8f0;
}

.stat-box .stat-icon {
    width: 48px;
    height: 48px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.stat-box .stat-icon .material-icons {
    font-size: 24px;
    color: white;
}

.stat-box.total .stat-icon {
    background: linear-gradient(135deg, #f59e0b, #d97706);
}

.stat-box.pending .stat-icon {
    background: linear-gradient(135deg, #6366f1, #4f46e5);
}

.stat-box.acknowledged .stat-icon {
    background: linear-gradient(135deg, #10b981, #059669);
}

.stat-box .stat-info {
    display: flex;
    flex-direction: column;
}

.stat-box .stat-number {
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--text-dark);
    line-height: 1;
}

.stat-box .stat-label {
    font-size: 0.8rem;
    color: var(--text-muted);
    margin-top: 0.25rem;
}

/* Severity row */
.stats-severity-row {
    display: flex;
    gap: 1.5rem;
    padding: 0.75rem 1rem;
    background: #f1f5f9;
    border-radius: 8px;
}

.severity-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.severity-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
}

.severity-item.critical .severity-dot { background: #dc2626; }
.severity-item.high .severity-dot { background: #ea580c; }
.severity-item.medium .severity-dot { background: #ca8a04; }
.severity-item.low .severity-dot { background: #16a34a; }

.severity-count {
    font-weight: 700;
    font-size: 1rem;
    color: var(--text-dark);
}

.severity-label {
    font-size: 0.8rem;
    color: var(--text-muted);
}

/* Confidence row */
.stats-confidence-row {
    padding: 0.75rem 0;
}

.confidence-meter {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.confidence-meter .material-icons {
    color: var(--primary);
    font-size: 20px;
}

.confidence-label {
    font-size: 0.85rem;
    color: var(--text-muted);
    white-space: nowrap;
}

.confidence-bar {
    flex: 1;
    height: 8px;
    background: #e2e8f0;
    border-radius: 4px;
    overflow: hidden;
}

.confidence-fill {
    height: 100%;
    background: linear-gradient(90deg, #3b82f6, #2563eb);
    border-radius: 4px;
    transition: width 0.5s ease;
}

.confidence-value {
    font-weight: 700;
    font-size: 1rem;
    color: var(--primary);
    min-width: 45px;
    text-align: right;
}

/* ============================================
   ALERTS BANNER - NEW DESIGN
   ============================================ */

.alerts-banner-new {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 0.75rem 1rem;
    border-radius: 10px;
    margin-bottom: 0.5rem;
}

.alerts-banner-new.critical {
    background: linear-gradient(135deg, #fef2f2, #fee2e2);
    border: 1px solid #fca5a5;
}

.alerts-banner-new.high {
    background: linear-gradient(135deg, #fff7ed, #ffedd5);
    border: 1px solid #fdba74;
}

.alerts-banner-new.medium {
    background: linear-gradient(135deg, #fefce8, #fef9c3);
    border: 1px solid #fde047;
}

.alerts-banner-new.low {
    background: linear-gradient(135deg, #f0fdf4, #dcfce7);
    border: 1px solid #86efac;
}

.alert-indicator {
    flex-shrink: 0;
}

.alert-indicator .material-icons {
    font-size: 28px;
}

.alerts-banner-new.critical .alert-indicator .material-icons { color: #dc2626; }
.alerts-banner-new.high .alert-indicator .material-icons { color: #ea580c; }
.alerts-banner-new.medium .alert-indicator .material-icons { color: #ca8a04; }
.alerts-banner-new.low .alert-indicator .material-icons { color: #16a34a; }

.alert-indicator .pulse {
    animation: pulse-icon 1.5s ease-in-out infinite;
}

@keyframes pulse-icon {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.7; transform: scale(1.1); }
}

.alert-main {
    flex: 1;
    min-width: 0;
}

.alert-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.25rem;
}

.alert-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 24px;
    height: 24px;
    padding: 0 0.5rem;
    border-radius: 12px;
    font-size: 0.8rem;
    font-weight: 700;
    color: white;
}

.alerts-banner-new.critical .alert-badge { background: #dc2626; }
.alerts-banner-new.high .alert-badge { background: #ea580c; }
.alerts-banner-new.medium .alert-badge { background: #ca8a04; }
.alerts-banner-new.low .alert-badge { background: #16a34a; }

.alerts-banner-new.critical .alert-title { color: #991b1b; }
.alerts-banner-new.high .alert-title { color: #9a3412; }
.alerts-banner-new.medium .alert-title { color: #854d0e; }
.alerts-banner-new.low .alert-title { color: #166534; }

.alert-preview {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.8rem;
}

.severity-tag {
    padding: 0.15rem 0.5rem;
    border-radius: 4px;
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
}

.severity-tag.critical { background: #fecaca; color: #991b1b; }
.severity-tag.high { background: #fed7aa; color: #9a3412; }
.severity-tag.medium { background: #fef08a; color: #854d0e; }
.severity-tag.low { background: #bbf7d0; color: #166534; }

.alert-text {
    color: var(--text-muted);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.alert-actions-bar {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-shrink: 0;
}

.alert-actions-bar .btn-outline {
    border: 1px solid currentColor;
    background: transparent;
}

.alerts-banner-new.critical .btn-outline { color: #dc2626; border-color: #fca5a5; }
.alerts-banner-new.high .btn-outline { color: #ea580c; border-color: #fdba74; }

.alert-actions-bar .btn-ghost {
    padding: 0.35rem;
}

/* Responsive */
@media (max-width: 768px) {
    .stats-main-row {
        grid-template-columns: 1fr;
    }

    .stats-severity-row {
        flex-wrap: wrap;
        gap: 1rem;
    }

    .alerts-banner-new {
        flex-wrap: wrap;
    }

    .alert-preview {
        width: 100%;
    }
}

/* ============================================
   ANOMALY DETAIL PANEL - NEW DESIGN
   ============================================ */

.anomaly-detail-card {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.anomaly-detail-header-new {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    padding: 1rem;
    border-radius: 10px;
    background: #f8fafc;
}

.anomaly-detail-header-new.severity-critical { background: linear-gradient(135deg, #fef2f2, #fee2e2); border-left: 4px solid #dc2626; }
.anomaly-detail-header-new.severity-high { background: linear-gradient(135deg, #fff7ed, #ffedd5); border-left: 4px solid #ea580c; }
.anomaly-detail-header-new.severity-medium { background: linear-gradient(135deg, #fefce8, #fef9c3); border-left: 4px solid #ca8a04; }
.anomaly-detail-header-new.severity-low { background: linear-gradient(135deg, #f0fdf4, #dcfce7); border-left: 4px solid #16a34a; }

.anomaly-detail-header-new .header-icon {
    width: 48px;
    height: 48px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.anomaly-detail-header-new.severity-critical .header-icon { background: #dc2626; }
.anomaly-detail-header-new.severity-high .header-icon { background: #ea580c; }
.anomaly-detail-header-new.severity-medium .header-icon { background: #ca8a04; }
.anomaly-detail-header-new.severity-low .header-icon { background: #16a34a; }

.anomaly-detail-header-new .header-icon .material-icons {
    font-size: 24px;
    color: white;
}

.anomaly-detail-header-new .header-content {
    flex: 1;
    min-width: 0;
}

.anomaly-detail-header-new .header-content h3 {
    margin: 0 0 0.5rem;
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-dark);
    line-height: 1.3;
}

.header-badges {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
}

.type-badge {
    padding: 0.2rem 0.6rem;
    border-radius: 4px;
    font-size: 0.7rem;
    font-weight: 600;
    background: #e2e8f0;
    color: var(--text-muted);
    text-transform: uppercase;
}

.severity-badge-new {
    padding: 0.2rem 0.6rem;
    border-radius: 4px;
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
}

.severity-badge-new.severity-critical { background: #fecaca; color: #991b1b; }
.severity-badge-new.severity-high { background: #fed7aa; color: #9a3412; }
.severity-badge-new.severity-medium { background: #fef08a; color: #854d0e; }
.severity-badge-new.severity-low { background: #bbf7d0; color: #166534; }

.anomaly-description-box {
    padding: 0.75rem 1rem;
    background: #f1f5f9;
    border-radius: 8px;
    border-left: 3px solid var(--primary);
}

.anomaly-description-box p {
    margin: 0;
    font-size: 0.9rem;
    color: var(--text-dark);
    line-height: 1.5;
}

.anomaly-metrics {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.75rem;
}

.metric-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem;
    background: #f8fafc;
    border-radius: 8px;
    border: 1px solid #e2e8f0;
}

.metric-item .material-icons {
    font-size: 20px;
    color: var(--primary);
}

.metric-content {
    display: flex;
    flex-direction: column;
}

.metric-value {
    font-weight: 700;
    font-size: 1rem;
    color: var(--text-dark);
}

.metric-label {
    font-size: 0.7rem;
    color: var(--text-muted);
    text-transform: uppercase;
}

.confidence-bar-small {
    flex: 1;
    height: 6px;
    background: #e2e8f0;
    border-radius: 3px;
    overflow: hidden;
}

.confidence-fill-small {
    height: 100%;
    background: linear-gradient(90deg, #3b82f6, #2563eb);
    border-radius: 3px;
}

.anomaly-section-new {
    padding: 0.75rem 0;
    border-top: 1px solid #e2e8f0;
}

.anomaly-section-new .section-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.75rem;
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-dark);
}

.anomaly-section-new .section-header .material-icons {
    font-size: 18px;
    color: var(--primary);
}

.details-grid {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.details-grid .detail-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.5rem 0.75rem;
    background: #f8fafc;
    border-radius: 6px;
}

.details-grid .detail-key {
    font-size: 0.8rem;
    color: var(--text-muted);
}

.details-grid .detail-value {
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-dark);
}

.related-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.related-tag {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.4rem 0.75rem;
    border-radius: 6px;
    font-size: 0.8rem;
    cursor: pointer;
    transition: all 0.2s;
}

.related-tag .material-icons {
    font-size: 14px;
}

.related-tag.entity {
    background: #dbeafe;
    color: #1d4ed8;
}

.related-tag.entity:hover {
    background: #bfdbfe;
}

.related-tag.event {
    background: #fef3c7;
    color: #92400e;
}

.related-tag.evidence {
    background: #e0e7ff;
    color: #4338ca;
}

.related-tag.evidence:hover {
    background: #c7d2fe;
}

.anomaly-section-new.ai-section {
    background: linear-gradient(135deg, #eff6ff, #f0f9ff);
    margin: 0 -1.25rem;
    padding: 1rem 1.25rem;
    border-radius: 0;
}

.ai-explanation-content {
    font-size: 0.85rem;
    color: var(--text-dark);
    line-height: 1.6;
}

.recommendations-list-new {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.recommendations-list-new li {
    display: flex;
    align-items: flex-start;
    gap: 0.5rem;
    font-size: 0.85rem;
    color: var(--text-dark);
}

.recommendations-list-new li .material-icons {
    font-size: 16px;
    color: #16a34a;
    flex-shrink: 0;
}

.anomaly-actions-footer {
    display: flex;
    gap: 0.75rem;
    padding-top: 1rem;
    border-top: 1px solid #e2e8f0;
    margin-top: 0.5rem;
}

.anomaly-actions-footer .btn {
    flex: 1;
    justify-content: center;
}

.acknowledged-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.5rem 1rem;
    background: #dcfce7;
    color: #166534;
    border-radius: 6px;
    font-size: 0.85rem;
    font-weight: 500;
}

.acknowledged-badge .material-icons {
    font-size: 18px;
}

/* ============================================
   CAUSAL CHAIN ANOMALIES PANEL
   ============================================ */

.causal-chain-anomalies-panel {
    background: white;
    border-radius: 12px;
    border: 1px solid #e2e8f0;
    overflow: hidden;
    margin-bottom: 1rem;
}

.causal-chain-anomalies-panel .panel-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.75rem 1rem;
    background: linear-gradient(135deg, #fef3c7, #fef9c3);
    border-bottom: 1px solid #fcd34d;
    cursor: pointer;
    transition: all 0.2s ease;
}

.causal-chain-anomalies-panel .panel-header:hover {
    background: linear-gradient(135deg, #fde68a, #fef3c7);
}

.causal-chain-anomalies-panel .panel-header .header-left {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.causal-chain-anomalies-panel .panel-header .material-icons {
    color: #b45309;
    font-size: 1.25rem;
}

.causal-chain-anomalies-panel .panel-header h3 {
    margin: 0;
    font-size: 0.95rem;
    font-weight: 600;
    color: #92400e;
}

.causal-chain-anomalies-panel .panel-header .anomaly-count-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 24px;
    height: 24px;
    padding: 0 0.5rem;
    background: #f59e0b;
    color: white;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
}

.causal-chain-anomalies-panel .panel-header .toggle-icon {
    color: #92400e;
    transition: transform 0.3s ease;
}

.causal-chain-anomalies-panel .panel-header.collapsed .toggle-icon {
    transform: rotate(-90deg);
}

.causal-chain-anomalies-panel .panel-content {
    max-height: 400px;
    overflow-y: auto;
    transition: max-height 0.3s ease;
}

.causal-chain-anomalies-panel .panel-content.collapsed {
    max-height: 0;
    overflow: hidden;
}

.causal-chain-anomalies-panel .anomalies-list {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    padding: 0.75rem;
}

.chain-anomaly-item {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    padding: 0.75rem;
    background: var(--bg-subtle);
    border: 1px solid var(--border);
    border-radius: 8px;
    transition: all 0.2s ease;
}

.chain-anomaly-item:hover {
    background: white;
    border-color: #f59e0b;
    box-shadow: 0 2px 8px rgba(245, 158, 11, 0.15);
}

.chain-anomaly-item .anomaly-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.chain-anomaly-item .anomaly-icon {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    flex-shrink: 0;
}

.chain-anomaly-item .anomaly-icon.severity-critical {
    background: #fef2f2;
    color: #dc2626;
}

.chain-anomaly-item .anomaly-icon.severity-high {
    background: #fff7ed;
    color: #ea580c;
}

.chain-anomaly-item .anomaly-icon.severity-medium {
    background: #fefce8;
    color: #ca8a04;
}

.chain-anomaly-item .anomaly-icon.severity-low {
    background: #f0fdf4;
    color: #16a34a;
}

.chain-anomaly-item .anomaly-icon .material-icons {
    font-size: 1.1rem;
}

.chain-anomaly-item .anomaly-info {
    flex: 1;
    min-width: 0;
}

.chain-anomaly-item .anomaly-type {
    font-weight: 600;
    font-size: 0.85rem;
    color: var(--text-dark);
    margin-bottom: 0.15rem;
}

.chain-anomaly-item .anomaly-description {
    font-size: 0.8rem;
    color: var(--text-muted);
    line-height: 1.4;
}

.chain-anomaly-item .anomaly-badges {
    display: flex;
    gap: 0.35rem;
    margin-left: auto;
    flex-shrink: 0;
}

.chain-anomaly-item .severity-badge {
    display: inline-flex;
    align-items: center;
    padding: 0.2rem 0.5rem;
    border-radius: 4px;
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
}

.chain-anomaly-item .severity-badge.critical {
    background: #fee2e2;
    color: #991b1b;
}

.chain-anomaly-item .severity-badge.high {
    background: #ffedd5;
    color: #9a3412;
}

.chain-anomaly-item .severity-badge.medium {
    background: #fef9c3;
    color: #854d0e;
}

.chain-anomaly-item .severity-badge.low {
    background: #dcfce7;
    color: #166534;
}

.chain-anomaly-item .status-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.2rem 0.5rem;
    border-radius: 4px;
    font-size: 0.7rem;
    font-weight: 500;
    background: #f3f4f6;
    color: #6b7280;
}

.chain-anomaly-item .status-badge .material-icons {
    font-size: 0.8rem;
}

.anomaly-chain-preview {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 0.35rem;
    padding: 0.5rem;
    background: white;
    border: 1px dashed #d1d5db;
    border-radius: 6px;
    font-size: 0.75rem;
}

.anomaly-chain-preview .chain-step {
    padding: 0.15rem 0.4rem;
    background: #e0e7ff;
    color: #4338ca;
    border-radius: 4px;
    font-weight: 500;
}

.anomaly-chain-preview .chain-step.problematic {
    background: #fee2e2;
    color: #991b1b;
    border: 1px solid #fca5a5;
}

.anomaly-chain-preview .chain-arrow {
    color: #9ca3af;
}

.causal-chain-anomalies-panel .no-anomalies {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 2rem;
    text-align: center;
    color: var(--text-muted);
}

.causal-chain-anomalies-panel .no-anomalies .material-icons {
    font-size: 2.5rem;
    color: #10b981;
    margin-bottom: 0.5rem;
}

.causal-chain-anomalies-panel .no-anomalies p {
    margin: 0;
    font-size: 0.85rem;
}

/* Anomaly type specific colors */
.chain-anomaly-item[data-type="incomplete"] .anomaly-icon {
    background: #fef3c7;
    color: #b45309;
}

.chain-anomaly-item[data-type="circular"] .anomaly-icon {
    background: #fee2e2;
    color: #dc2626;
}

.chain-anomaly-item[data-type="unknown_entity"] .anomaly-icon {
    background: #e0e7ff;
    color: #4f46e5;
}

.chain-anomaly-item[data-type="complex"] .anomaly-icon {
    background: #fce7f3;
    color: #be185d;
}

.chain-anomaly-item[data-type="missing_relation"] .anomaly-icon {
    background: #f3f4f6;
    color: #6b7280;
}

.chain-anomaly-item[data-type="contradiction"] .anomaly-icon {
    background: #fef2f2;
    color: #b91c1c;
}

/* ============================================
   SCENARIO CARDS - NEW DESIGN
   ============================================ */

.scenario-card-new {
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 12px;
    padding: 1rem;
    cursor: pointer;
    transition: all 0.2s;
}

.scenario-card-new:hover {
    border-color: var(--primary);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.scenario-card-new.selected {
    border-color: var(--primary);
    background: #eff6ff;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.scenario-card-header {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    margin-bottom: 0.75rem;
}

.scenario-type-icon {
    width: 40px;
    height: 40px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.scenario-type-icon .material-icons {
    font-size: 20px;
    color: white;
}

.scenario-type-icon.guilt { background: linear-gradient(135deg, #dc2626, #b91c1c); }
.scenario-type-icon.presence { background: linear-gradient(135deg, #0891b2, #0e7490); }
.scenario-type-icon.motive { background: linear-gradient(135deg, #7c3aed, #6d28d9); }
.scenario-type-icon.timeline { background: linear-gradient(135deg, #2563eb, #1d4ed8); }
.scenario-type-icon.relation { background: linear-gradient(135deg, #059669, #047857); }

.scenario-card-info {
    flex: 1;
    min-width: 0;
}

.scenario-type-label {
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    color: var(--text-muted);
    display: block;
    margin-bottom: 0.15rem;
}

.scenario-card-info h4 {
    margin: 0;
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-dark);
    line-height: 1.3;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.scenario-plausibility-badge {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    flex-shrink: 0;
}

.scenario-plausibility-badge .plausibility-value {
    font-size: 1.1rem;
    font-weight: 700;
}

.scenario-plausibility-badge.high .plausibility-value { color: #16a34a; }
.scenario-plausibility-badge.medium .plausibility-value { color: #ca8a04; }
.scenario-plausibility-badge.low .plausibility-value { color: #dc2626; }

.plausibility-bar-mini {
    width: 50px;
    height: 4px;
    background: #e2e8f0;
    border-radius: 2px;
    overflow: hidden;
    margin-top: 0.25rem;
}

.plausibility-fill-mini {
    height: 100%;
    border-radius: 2px;
    transition: width 0.3s;
}

.scenario-plausibility-badge.high .plausibility-fill-mini { background: #16a34a; }
.scenario-plausibility-badge.medium .plausibility-fill-mini { background: #ca8a04; }
.scenario-plausibility-badge.low .plausibility-fill-mini { background: #dc2626; }

.scenario-assumption-box {
    display: flex;
    align-items: flex-start;
    gap: 0.5rem;
    padding: 0.75rem;
    background: #f8fafc;
    border-radius: 8px;
    border-left: 3px solid var(--primary);
    margin-bottom: 0.75rem;
}

.scenario-assumption-box .material-icons {
    font-size: 18px;
    color: var(--primary);
    flex-shrink: 0;
    opacity: 0.6;
}

.scenario-assumption-box p {
    margin: 0;
    font-size: 0.85rem;
    color: var(--text-dark);
    font-style: italic;
    line-height: 1.4;
}

.scenario-metrics-row {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 0.75rem;
}

.scenario-metric {
    display: flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.35rem 0.6rem;
    background: #f1f5f9;
    border-radius: 6px;
    font-size: 0.75rem;
}

.scenario-metric .material-icons {
    font-size: 14px;
    color: var(--text-muted);
}

.scenario-metric .metric-number {
    font-weight: 700;
    color: var(--text-dark);
}

.scenario-metric .metric-text {
    color: var(--text-muted);
}

.scenario-metric.supporting .material-icons { color: #16a34a; }
.scenario-metric.supporting .metric-number { color: #16a34a; }

.scenario-metric.contradicting .material-icons { color: #dc2626; }
.scenario-metric.contradicting .metric-number { color: #dc2626; }

.scenario-actions-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 0.5rem;
    padding-top: 0.75rem;
    border-top: 1px solid #e2e8f0;
}

.btn.btn-action {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.5rem;
    border-radius: 6px;
    background: #f1f5f9;
    border: 1px solid #e2e8f0;
    cursor: pointer;
    transition: all 0.2s;
}

.btn.btn-action:hover {
    background: #e2e8f0;
    border-color: #cbd5e1;
}

.btn.btn-action .material-icons {
    font-size: 18px;
    color: #64748b;
}

.btn.btn-action:hover .material-icons {
    color: var(--primary);
}

.btn.btn-action.danger:hover {
    background: #fee2e2;
    border-color: #fca5a5;
}

.btn.btn-action.danger:hover .material-icons {
    color: #dc2626;
}

/* Scenario panel description improvements */
#view-scenarios .panel-description {
    padding: 0.75rem 1.25rem;
    background: #f8fafc;
    border-bottom: 1px solid var(--border);
    font-size: 0.85rem;
    color: var(--text-muted);
    display: flex;
    align-items: flex-start;
    gap: 0.5rem;
}

#view-scenarios .panel-description .material-icons {
    font-size: 18px;
    flex-shrink: 0;
    margin-top: 2px;
    color: var(--primary);
}

#view-scenarios .panel-description .description-text {
    flex: 1;
    line-height: 1.5;
}

#view-scenarios .panel-description .description-text strong {
    color: var(--text-dark);
}

/* ==============================================
   Advanced Detection Features - Statistical Display
   ============================================== */

/* Bayesian Indicator in anomaly cards */
.bayesian-indicator {
    font-size: 0.75rem;
    font-weight: 600;
    margin-left: 4px;
}

.bayesian-indicator.positive {
    color: #16a34a;
}

.bayesian-indicator.negative {
    color: #dc2626;
}

/* Z-Score display in anomaly cards */
.anomaly-zscore {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: 0.8rem;
    color: #6366f1;
    background: #eef2ff;
    padding: 2px 8px;
    border-radius: 4px;
}

.anomaly-zscore .material-icons {
    font-size: 14px;
}

/* Detection method badge */
.detection-method-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: 0.75rem;
    padding: 3px 8px;
    background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
    color: #0369a1;
    border-radius: 12px;
    border: 1px solid #bae6fd;
    cursor: help;
}

.detection-method-badge .material-icons {
    font-size: 14px;
}

/* Method badge in header */
.method-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: 0.7rem;
    padding: 2px 6px;
    background: #f1f5f9;
    color: #475569;
    border-radius: 4px;
}

.method-badge .material-icons {
    font-size: 12px;
}

/* Bayesian adjustment display */
.bayesian-adjust {
    font-size: 0.75rem;
    font-weight: 600;
    padding: 2px 6px;
    border-radius: 4px;
    margin-left: 8px;
}

.bayesian-adjust.positive {
    background: #dcfce7;
    color: #16a34a;
}

.bayesian-adjust.negative {
    background: #fee2e2;
    color: #dc2626;
}

/* Stats section in anomaly detail */
.anomaly-section-new.stats-section {
    background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
    border: 1px solid #e9d5ff;
}

.anomaly-section-new.stats-section .section-header {
    color: #7c3aed;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 8px;
}

.stats-grid .detail-row {
    background: rgba(255, 255, 255, 0.6);
    padding: 6px 10px;
    border-radius: 6px;
}

/* Algorithm stats in detection summary */
.algorithm-stats {
    background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
    border: 1px solid #e9d5ff;
    border-radius: 12px;
    padding: 1rem;
    margin: 1rem 0;
}

.algorithm-stats h4 {
    display: flex;
    align-items: center;
    gap: 8px;
    color: #7c3aed;
    font-size: 0.9rem;
    margin-bottom: 0.75rem;
}

.algorithm-stats h4 .material-icons {
    font-size: 18px;
}

.stats-grid-summary {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
}

.stats-grid-summary .stat-item {
    flex: 1;
    min-width: 100px;
    text-align: center;
    padding: 0.75rem;
    background: white;
    border-radius: 8px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.stats-grid-summary .stat-item.highlight {
    background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
    border: 1px solid #fbbf24;
}

.stats-grid-summary .stat-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: #1e3a5f;
    display: block;
}

.stats-grid-summary .stat-label {
    font-size: 0.75rem;
    color: #64748b;
    margin-top: 4px;
}

.stats-grid-summary .stat-help {
    display: block;
    font-size: 0.7rem;
    color: #64748b;
    margin-top: 6px;
    font-style: normal;
    line-height: 1.3;
    padding-top: 6px;
    border-top: 1px dashed #e2e8f0;
}

.stats-explanation {
    font-size: 0.85rem;
    color: #475569;
    margin: 0 0 1rem 0;
    padding: 0.75rem 1rem;
    background: rgba(255, 255, 255, 0.7);
    border-radius: 8px;
    border-left: 4px solid #7c3aed;
    line-height: 1.5;
    display: flex;
    align-items: flex-start;
    gap: 8px;
}

.stats-explanation .material-icons {
    color: #7c3aed;
    flex-shrink: 0;
}

.detection-methods-summary .stats-explanation {
    border-left-color: #0ea5e9;
}

.detection-methods-summary .stats-explanation .material-icons {
    color: #0ea5e9;
}

/* Detection methods summary section */
.detection-methods-summary {
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    border-radius: 12px;
    padding: 1rem;
    margin: 1rem 0;
}

.detection-methods-summary h4 {
    display: flex;
    align-items: center;
    gap: 8px;
    color: #475569;
    font-size: 0.9rem;
    margin-bottom: 0.75rem;
}

.detection-methods-summary h4 .material-icons {
    font-size: 18px;
    color: #0ea5e9;
}

.methods-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.detection-method-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px 12px;
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 20px;
    font-size: 0.8rem;
}

.method-badge-summary {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    color: #334155;
}

.method-badge-summary .material-icons {
    font-size: 16px;
    color: #0ea5e9;
}

.method-count {
    background: #0ea5e9;
    color: white;
    font-size: 0.7rem;
    font-weight: 600;
    padding: 2px 6px;
    border-radius: 10px;
    min-width: 20px;
    text-align: center;
}

/* Z-score display in type items */
.type-item .item-zscore {
    font-size: 0.7rem;
    color: #6366f1;
    background: #eef2ff;
    padding: 1px 6px;
    border-radius: 4px;
    margin-left: auto;
}

/* Metric item enhancements */
.anomaly-metrics .metric-item {
    position: relative;
}

/* NOTE: Tooltip styles are now unified in base.css with z-index: 100000 */

/* Causal chain anomalies grouped buttons */
.anomaly-chains-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 12px;
}

.anomaly-chains-buttons .anomaly-chain-preview {
    flex: 0 0 auto;
    padding: 6px 12px;
    font-size: 0.8rem;
}

.anomaly-count {
    background: #64748b;
    color: white;
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 0.75rem;
    margin-left: 8px;
}

/* Anomaly explanation box */
.anomaly-explanation-box {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    margin-top: 12px;
    padding: 12px 16px;
    background: linear-gradient(135deg, #fefce8 0%, #fef9c3 100%);
    border: 1px solid #fde047;
    border-radius: 8px;
    border-left: 4px solid #eab308;
}

.anomaly-explanation-box .material-icons {
    color: #ca8a04;
    font-size: 20px;
    flex-shrink: 0;
}

.anomaly-explanation-box p {
    margin: 0;
    font-size: 0.85rem;
    color: #713f12;
    line-height: 1.5;
}
